<!DOCTYPE html>
<html>
  <head>
    <title>Bot Wrapper</title>
  </head>
  <body>
    <iframe src="https://learnervii.github.io/test2Servicenow/" id="botFrame" width="100%" height="100%"></iframe>

    <script>
      // ✅ Function to extract query parameters
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      const iframe = document.getElementById("botFrame");

      iframe.addEventListener("load", () => {
        const serviceNowUrl = getQueryParam("pageUrl");
        
        console.log("✅ Sending pageUrl to iframe:", serviceNowUrl);

        iframe.contentWindow.postMessage(
          {
            type: "pageInfo",
            pageUrl: serviceNowUrl
          },
          "*"
        );
      });
    </script>
  </body>
</html>
